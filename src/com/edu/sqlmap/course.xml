<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.edu.model.Course">

	<resultMap type="com.edu.model.Course" id="courseResult">
		<result property="id" column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
		<result property="name" column="name" />
		<result property="teacherName" column="teacher" />
		<result property="classId" column="classId" />
		<result property="bookName" column="book" />
		<result property="status" column="status" />
		<result property="udate" column="udate" />
		<result property="uperson" column="uperson" />
		<result property="academy" column="academy" />
		<result property="description" column="description" />
	</resultMap>

 	<resultMap type="com.edu.model.Academy" id="academyResult">
		<result property="id" column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
		<result property="name" column="name" />
	</resultMap> 
	
		<resultMap type="com.edu.model.Major" id="majorResult">
		<result property="id" column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
		<result property="name" column="name" />
		<result property="name" column="name" />
	</resultMap> 

	<select id="selectVerCourse" parameterType="course" resultMap="courseResult">
		select c.id id,c.name name,m.`id` classId ,u.`name` teacher,
		b.`name`
		book , a.`name` academy ,c.description description ,c.`status`
		`status`,c.udate udate ,(select user.name from user where
		user.id=c.uperson) uperson
		from gobook.course
		c,gobook.user
		u,gobook.class m,gobook.academy a ,gobook.book b
		where
		c.classId=m.id
		and c.academyId=a.id and c.teacherId=u.id and
		c.bookId=b.id and
		(c.status=1 or c.status=2)
		<if test="null!=id or 0==id">
			and c.id=#{id}
		</if>
	</select>

	<select id="selectAllCourse" parameterType="course"  resultMap="courseResult">
		select
		c.id id,c.name name,m.`id` classId ,u.`name` teacher,
		b.`name`
		book ,
		a.`name` academy ,c.description description
		from gobook.course
		c,gobook.user u,gobook.class m,gobook.academy a ,gobook.book b
		where
		c.classId=m.id and c.academyId=a.id and c.teacherId=u.id and
		c.bookId=b.id
	</select>

</mapper>
